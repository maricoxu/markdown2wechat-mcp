# 提示词最佳实践

## 核心原则

编写好的提示词可以帮助 AI 准确理解你的需求，并正确调用工具。提示词质量直接影响功能是否正常工作。

---

## ✅ 好的提示词特征

### 1. **明确指定工具名称**

✅ **好的示例：**
```
请使用 convert_mermaid 工具处理文件：[文件路径]
```

❌ **不好的示例：**
```
帮我转换一下 Mermaid
```
（AI 可能不知道要用哪个工具）

### 2. **提供完整的绝对路径**

✅ **好的示例：**
```
请使用 convert_mermaid 工具处理文件：
/Users/xuyehua/Code/markdown2wechat-mcp/test/test-full-pipeline.md
```

❌ **不好的示例：**
```
处理 test.md
```
（相对路径可能找不到文件）

### 3. **明确说明要执行的所有步骤**

✅ **好的示例：**
```
请先使用 convert_mermaid 工具处理文件：[路径]，
然后使用 image_upload_cos 工具上传该文件中的所有图片。
```

❌ **不好的示例：**
```
处理一下文件然后上传
```
（不够明确，AI 可能遗漏步骤）

### 4. **显式说明需要启用的功能**

✅ **好的示例：**
```
请使用 publish_wechat 工具发布文件：[路径]，
启用完整 Pipeline 流程（convertMermaid: true, uploadImages: true）。
```

❌ **不好的示例：**
```
发布到微信公众号
```
（AI 可能不知道要启用 Pipeline）

---

## 📋 常用场景的标准提示词模板

### 场景 1: 仅转换 Mermaid（不发布）

**标准提示词：**
```
请使用 convert_mermaid 工具处理文件：[绝对路径]
```

**启用手绘风格：**
```
请使用 convert_mermaid 工具处理文件：[绝对路径]，启用手绘风格
```

### 场景 2: 转换 Mermaid + 上传图片（不发布）

**标准提示词：**
```
请先使用 convert_mermaid 工具处理文件：[绝对路径]，
然后使用 image_upload_cos 工具上传该文件中的所有图片。
```

### 场景 3: 完整 Pipeline 发布到微信公众号

**标准提示词：**
```
请使用 publish_wechat 工具发布文件：[绝对路径]到微信公众号，
启用完整自动化流程（自动转换 Mermaid 代码块为图片，并上传所有图片到 COS）。
```

**或更明确的版本：**
```
请使用 publish_wechat 工具发布文件：[绝对路径]，
runPipeline: { convertMermaid: true, uploadImages: true }
```

### 场景 4: 仅发布（不做任何转换）

**标准提示词：**
```
请使用 publish_wechat 工具发布文件：[绝对路径]到微信公众号。
```
（不启用 Pipeline，直接发布）

---

## 🎯 关键提示词词汇

使用以下词汇可以帮助 AI 更准确地理解你的意图：

### 启用 Pipeline 的关键词
- ✅ "启用完整 Pipeline"
- ✅ "启用完整自动化流程"
- ✅ "自动转换 Mermaid 并上传图片"
- ✅ "convertMermaid: true, uploadImages: true"

### 启用手绘风格的关键词
- ✅ "启用手绘风格"
- ✅ "使用手绘样式"
- ✅ "手绘风格转换"

### 不启用 Pipeline 的关键词
- ✅ "直接发布"
- ✅ "不转换，直接发布"
- ✅ "不使用 Pipeline"

---

## ❌ 常见错误提示词

### 错误 1: 不够明确
❌ "帮我处理一下这个文件"
✅ "请使用 convert_mermaid 工具处理文件：[路径]"

### 错误 2: 缺少工具名称
❌ "转换 Mermaid 然后上传"
✅ "请先使用 convert_mermaid 工具处理文件：[路径]，然后使用 image_upload_cos 工具上传图片"

### 错误 3: 使用相对路径
❌ "处理 test.md"
✅ "处理 /Users/xuyehua/Code/test.md"

### 错误 4: 假设 AI 会启用 Pipeline
❌ "发布到微信公众号"
✅ "使用 publish_wechat 工具发布文件：[路径]，启用完整 Pipeline 流程"

---

## 💡 提示词编写检查清单

在编写提示词前，问自己：

- [ ] 是否明确指定了工具名称？
- [ ] 是否提供了完整的绝对路径？
- [ ] 是否说明了所有需要执行的步骤？
- [ ] 是否显式说明了需要启用的功能（如 Pipeline、手绘风格）？
- [ ] 提示词是否足够清晰，不会产生歧义？

---

## 🔄 如果功能不工作，检查这些

1. **查看日志**：
   - 是否有 "步骤 1: 转换 Mermaid 代码块..." 的日志？
   - 是否有 "Pipeline 执行成功" 的日志？

2. **检查提示词**：
   - 是否明确指定了工具名称？
   - 是否启用了 Pipeline（如果使用了 publish_wechat）？
   - 文件路径是否正确？

3. **验证配置**：
   - COS 配置是否正确（如果需要上传图片）？
   - Mermaid CLI 是否已安装（如果需要转换 Mermaid）？

---

## 📊 提示词质量对比

### 低质量提示词
```
帮我发布这篇文章
```
**问题：**
- ❌ 没有指定工具名称
- ❌ 没有文件路径
- ❌ 没有说明是否启用 Pipeline
- ❌ AI 可能不知道要做什么

### 中等质量提示词
```
发布 test.md 到微信公众号
```
**问题：**
- ❌ 使用相对路径
- ❌ 没有说明是否启用 Pipeline
- ❌ AI 可能使用默认行为（不启用 Pipeline）

### 高质量提示词
```
请使用 publish_wechat 工具发布文件：
/Users/xuyehua/Code/markdown2wechat-mcp/test/test-full-pipeline.md
到微信公众号，启用完整自动化流程（自动转换 Mermaid 代码块为图片，
并上传所有图片到 COS）。
```
**优点：**
- ✅ 明确指定工具：`publish_wechat`
- ✅ 完整绝对路径
- ✅ 明确说明启用 Pipeline
- ✅ 说明了 Pipeline 会做什么

---

## 🎓 总结

**好的提示词 = 明确的目标 + 具体的工具 + 完整的路径 + 清晰的选项**

记住：**AI 只能根据你提供的信息来决定调用哪个工具和如何调用**。提示词越清晰、越完整，AI 越能准确执行你的意图。

如果功能不工作，首先检查提示词是否足够清晰，而不是假设代码有问题。很多时候，问题出在提示词表达上，而不是功能本身。

